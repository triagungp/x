<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="{{ url_for('static', filename='style.css') }}" rel="stylesheet">
    <title>Login</title>
</head>
<style>
    body {
        background-image: url("{{ url_for('static', filename='background.jpg') }}");
        background-size: cover;
        background-position: center;
        background-repeat: repeat-y;
        background-attachment: fixed;
        margin: 0;
    }
</style>

<body>
    <nav class="navbar" role="navigation" aria-label="main navigation">
        <div class="navbar-brand">
            <a class="navbar-item" href="https://bulma.io">
                <img src="{{ url_for('static', filename='logo-website.png') }}" width="112" height="28">
            </a>
            <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false"
                data-target="navbarBasicExample">
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
            </a>
        </div>
        <div id="navbarBasicExample" class="navbar-menu">
            <div class="navbar-start">
                <a class="navbar-item" href="/">
                    Home
                </a>
                <a class="navbar-item" href="/produk">
                    Produk
                </a>
                <a class="navbar-item" href="/riwayat-pesanan">
                    Riwayat Pemesanan
                </a>
            </div>
            <div class="navbar-end">
                <div class="navbar-item">
                    <div class="buttons">
                        <a href="" class="/cart mr-5">
                            <i class="fa-solid fa-cart-shopping" style="color: black;"></i>
                        </a>
                        <a href="" class="/profile mr-5">
                            <i class="fa-solid fa-user" style="color: black;"></i>
                        </a>
                        <a href="/logout" class="button is-danger">Log Out</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <section class="section">
        <div id="post-box" class="container">
            <div class="box">
                <article class="media">
                    <div class="media-content">
                        <div class="content">
                            {% if cart_items|length > 0 %}
                            {% for item in cart_items %}
                            <div class="cart-item-container">
                                <div class="columns">
                                    <div class="column is-narrow is-flex is-align-items-center">
                                        <input type="checkbox" name="selected_items" value="{{ item['_id'] }}" data-price="{{ item.get('total_harga') }}" onclick="calculateTotal()">
                                    </div>
                                    <div class="column is-narrow">
                                        {% if item.foto_produk and item.foto_produk != 'default.jpg' %}
                                        <img src="{{ url_for('static', filename='produk/' + item.foto_produk) }}"
                                            alt="{{ item.nama_produk }} Image" width="200">
                                    {% else %}
                                        <img src="{{ url_for('static', filename='produk/default.jpg') }}"
                                            alt="Default Image" width="200">
                                    {% endif %}
                                    </div>
                                    <div class="column">
                                        <div class="cart-item">
                                            <h2>{{ item.get('nama_produk') }}</h2>
                                            <p>Quantity: {{ item.get('jumlah_pesanan') }}</p>
                                            <p>Price: {{ item.get('total_harga') }}</p>

                                        </div>
                                    </div>
                                    <div class="column is-narrow is-flex is-align-items-center">
                                        <form action="{{ url_for('delete_cart_item') }}" method="post">
                                            <input type="hidden" name="cart_item_id" value="{{ item['_id'] }}">
                                            <button type="submit" class="button is-danger">Delete</button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                            {% else %}
                            <div class="notification is-white is-flex is-justify-content-center">
                                <h1 style="font-size: 40px;"><strong>Your cart is empty.</strong></h1>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </article>
            </div>
        </div>
    </section>

    <div id="post-box" class="container">
        <div class="box">
            <article class="media">
                <div class="media-content">
                    <div class="content">
                        <div class="total-container">
                            <h3 id="total-display">Total: Rp {{ total_price|default(0)|int }}</h3>
                        </div>                        
                    </div>
                </div>
            </article>
        </div>
    </div>


</body>

</html>